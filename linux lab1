#!/bin/bash

# System Information
hostname=$(hostname)
os=$(source /etc/os-release && echo $PRETTY_NAME)
uptime=$(uptime -p)

# Hardware Information
cpu=$(lshw -class processor | awk '/product/ {print $2,$3,$4,$5,$6}')
cpu_speed=$(lscpu | awk '/MHz/ {print $3}')
max_cpu_speed=$(lscpu | awk '/max MHz/ {print $4}')
ram=$(free -h | awk '/Mem:/ {print $2}')
disks=$(lsblk -b | awk '/disk/ {print $1,$4}')
video=$(lshw -class display | awk '/product/ {print $2,$3,$4,$5}')

# Network Information
fqdn=$(hostname -f)
host_address=$(ip -4 addr show | awk '/inet / {print $2}')
gateway_ip=$(ip route | awk '/default/ {print $3}')
dns_server=$(grep "nameserver" /etc/resolv.conf | awk '{print $2}')
interface=$(ip -o -4 addr show | awk '!/^[0-9]*: ?lo|link\/ether/ {print $2}')
ip_address=$(ip -4 addr show $interface | awk '/inet / {print $2}')

# System Status
users=$(who | awk '{print $1}' | sort | uniq)
disk_space=$(df -h --output=target,avail | awk 'NR>1')
process_count=$(ps -e | wc -l)
load_averages=$(cat /proc/loadavg | awk '{print $1,$2,$3}')
memory_allocation=$(free -h | awk '/Mem:/ {print $3"/"$2}')
listening_ports=$(ss -tlnp | awk '/LISTEN/ {print $4}' | cut -d':' -f2)
ufw_rules=$(sudo ufw show raw | awk '/Rule/ {print $2}')

# Generate the report
cat << EOF

System Report generated by $USER, $(date +"%F %T")

System Information
-------------------
Hostname: $hostname
OS: $os
Uptime: $uptime

Hardware Information
----------------------
CPU: $cpu
Speed: $cpu_speed (Max: $max_cpu_speed)
RAM: $ram
Disk(s): $disks
Video: $video

Network Information
---------------------
FQDN: $fqdn
Host Address: $host_address
Gateway IP: $gateway_ip
DNS Server: $dns_server

InterfaceName: $interface
IP Address: $ip_address

System Status
--------------
Users Logged In: $users
Disk Space: $disk_space
Process Count: $process_count
Load Averages: $load_averages
Memory Allocation: $memory_allocation
Listening Network Ports: $listening_ports
UFW Rules: $ufw_rules

EOF

Output
System Information
-------------------
Hostname: pc200511414
OS: Ubuntu 22.04.1 LTS
Uptime: up 15 minutes

Hardware Information
----------------------
CPU: 12th Gen Intel(R) Core(TM) i7-12700H
Speed:  (Max: )
RAM: 2.9Gi
Disk(s): sda 26843545600
Video: SVGA II Adapter

Network Information
---------------------
FQDN: pc200511414
Host Address: 127.0.0.1/8
10.0.2.15/24
192.168.130.99/24
172.16.5.2/24
172.16.4.2/24
172.16.3.2/24
Gateway IP: 10.0.2.2
DNS Server: 127.0.0.53

InterfaceName: enp0s3
enp0s8
en-vl30
en-vl20
en-vl10
IP Address:

System Status
--------------
Users Logged In: bikash
Disk Space: /run            296M
/               4.0G
/dev/shm        1.5G
/run/lock       5.0M
/boot           1.7G
/run/user/1001  299M
Process Count: 149
Load Averages: 0.25 0.22 0.18
Memory Allocation: 597Mi/2.9Gi
Listening Network Ports: 445
993
995
33060
3306
139
110
143
53
53
53
53
53
53
53
53
53
53
53
53
53
53
53
53
53
53
53
22
25
953
953
953


9090




21
UFW Rules:

root@pc200511414:/home/bikash#
